<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Khan - AI Fitness Coach</title>
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-black text-white m-0 p-0">
  <div id="app"></div>
  
  <script>
    let workoutCount = 0;
    let currentPage = 'landing';
    let selectedTier = null;
    let googleUser = null;
    let selectedWorkout = null;
    let sessionTime = 0;
    let sessionActive = false;
    let countdownActive = false;
    let countdownValue = 10;

    const workouts = [
      { 
        id: 1, 
        name: "Fat Loss Protocol", 
        type: "hiit", 
        duration: 45, 
        difficulty: "Advanced", 
        icon: "ğŸ”¥", 
        color: "from-red-500 to-pink-500", 
        exercises: ["Burpees", "Jump Squats", "Mountain Climbers", "Push-ups"],
        objectives: [
          { 
            time: 0, 
            duration: 300, 
            exercise: "ğŸ”¥ WARM-UP",
            reps: "5 MINUTES",
            command: "Get Your Body Ready",
            instruction: "Light jogging in place. Arm circles. Jumping jacks. Get your heart pumping. NO STOPPING.",
            visual: "ğŸƒğŸƒğŸƒ",
            details: "â€¢ Light pace\nâ€¢ Loose movements\nâ€¢ Deep breathing"
          },
          { 
            time: 300, 
            duration: 40, 
            exercise: "ğŸ’¥ BURPEES",
            reps: "40 SECONDS - GO!",
            command: "MAXIMUM SPEED",
            instruction: "POSITION: Stand tall. MOVE: Drop to plank â†’ Push-up â†’ Jump feet back â†’ Jump UP with hands overhead. REPEAT NON-STOP.",
            visual: "ğŸƒâ†“ğŸ’ªâ†‘ğŸ™Œ",
            details: "â€¢ Full range motion\nâ€¢ No rest\nâ€¢ Land soft on jump\nâ€¢ Power from legs"
          },
          { 
            time: 340, 
            duration: 20, 
            exercise: "ğŸ˜®â€ğŸ’¨ REST",
            reps: "20 SECONDS",
            command: "BREATHE HARD",
            instruction: "Heavy breathing. Hands on knees. Prepare for next round. You're CRUSHING it!",
            visual: "ğŸ˜¤ğŸ’¨ğŸ’¨",
            details: "â€¢ Catch your breath\nâ€¢ Shake out legs\nâ€¢ Mental prep"
          },
          { 
            time: 360, 
            duration: 40, 
            exercise: "ğŸ¦µ JUMP SQUATS",
            reps: "40 SECONDS - GO!",
            command: "EXPLOSIVE LEGS",
            instruction: "POSITION: Feet shoulder-width. MOVE: Squat down â†’ Jump UP as high as possible â†’ Land soft â†’ Repeat. ZERO REST.",
            visual: "â¬‡ï¸ğŸ’ªâ¬†ï¸ğŸ™Œ",
            details: "â€¢ Deep squat\nâ€¢ Maximum air time\nâ€¢ Soft landing\nâ€¢ Drive through heels"
          },
          { 
            time: 400, 
            duration: 20, 
            exercise: "ğŸ˜®â€ğŸ’¨ REST",
            reps: "20 SECONDS",
            command: "BREATHE",
            instruction: "Still standing. Keep moving. Light bouncing. Don't sit down. KEEP ENERGY UP.",
            visual: "ğŸƒğŸ’¨",
            details: "â€¢ Stay moving\nâ€¢ Light bouncing\nâ€¢ 3-2-1 ready"
          },
          { 
            time: 420, 
            duration: 40, 
            exercise: "â›°ï¸ MOUNTAIN CLIMBERS",
            reps: "40 SECONDS - GO!",
            command: "CARDIO OVERLOAD",
            instruction: "POSITION: Plank position, hands under shoulders. MOVE: Drive knees to chest FAST alternating. Like running in place. SPEED IS KEY.",
            visual: "ğŸ’ªğŸƒğŸ’¨ğŸ’¨",
            details: "â€¢ Fast pace\nâ€¢ Knees to chest\nâ€¢ Keep hips level\nâ€¢ Explosive motion"
          },
          { 
            time: 460, 
            duration: 20, 
            exercise: "ğŸ˜®â€ğŸ’¨ REST",
            reps: "20 SECONDS",
            command: "ALMOST DONE",
            instruction: "You're halfway through Round 1. Shake it out. Get ready for the final move.",
            visual: "ğŸ’ªğŸ˜¤",
            details: "â€¢ Shake legs\nâ€¢ Deep breaths\nâ€¢ Mental focus"
          },
          { 
            time: 480, 
            duration: 40, 
            exercise: "ğŸ’ª PUSH-UPS",
            reps: "40 SECONDS - GO!",
            command: "CHEST STRENGTH",
            instruction: "POSITION: Plank with hands under shoulders. MOVE: Lower chest to ground â†’ Push explosively up. Full range. NO SAGGING.",
            visual: "ğŸ’ªâ¬‡ï¸â¬†ï¸ğŸ’ª",
            details: "â€¢ Full depth\nâ€¢ Chest touches ground\nâ€¢ Explosive push\nâ€¢ Tight core"
          },
          { 
            time: 520, 
            duration: 1080, 
            exercise: "ğŸ” ROUND 2 & 3",
            reps: "REPEAT ALL 4 EXERCISES",
            command: "PUSH HARDER EACH ROUND",
            instruction: "Same exercises. Same timing. But THIS TIME - DO MORE REPS. Push yourself. Each round gets tougher. EMBRACE THE PAIN.",
            visual: "ğŸ”¥ğŸ”¥ğŸ”¥",
            details: "â€¢ Faster pace\nâ€¢ More intensity\nâ€¢ Less rest\nâ€¢ BEAST MODE"
          },
          { 
            time: 1600, 
            duration: 300, 
            exercise: "ğŸ§˜ COOL DOWN",
            reps: "5 MINUTES",
            command: "YOU CRUSHED IT",
            instruction: "Slow walking. Light stretching. Chest, shoulders, legs. Deep breathing. Heart rate dropping. YOU JUST BURNED MASSIVE CALORIES. CHAMPION.",
            visual: "ğŸ†ğŸ˜¤ğŸ’ª",
            details: "â€¢ Walk it out\nâ€¢ Stretch chest\nâ€¢ Stretch legs\nâ€¢ Victory breath"
          }
        ]
      }
    ];

    function formatTime(seconds) {
      const mins = Math.floor(seconds / 60);
      const secs = seconds % 60;
      return `${mins}:${secs < 10 ? '0' : ''}${secs}`;
    }

    function getCurrentObjective(workoutId, timeElapsed) {
      const w = workouts.find(x => x.id === workoutId);
      if (!w || !w.objectives) return null;
      
      for (let i = w.objectives.length - 1; i >= 0; i--) {
        if (timeElapsed >= w.objectives[i].time) {
          return w.objectives[i];
        }
      }
      return w.objectives[0];
    }

    function startCountdown() {
      countdownActive = true;
      countdownValue = 10;
      currentPage = 'countdown';
      updateCountdown();
    }

    function updateCountdown() {
      if (!countdownActive) return;
      
      render();
      
      if (countdownValue > 0) {
        countdownValue--;
        setTimeout(updateCountdown, 1000);
      } else {
        countdownActive = false;
        currentPage = 'workout-active';
        startSessionTimer();
      }
    }

    function startSessionTimer() {
      sessionActive = true;
      sessionTime = 0;
      updateSession();
    }

    function updateSession() {
      if (!sessionActive) return;
      
      sessionTime++;
      
      render();
      
      if (sessionTime < 1900) {
        setTimeout(updateSession, 1000);
      } else {
        sessionActive = false;
      }
    }

    function render() {
      const app = document.getElementById('app');
      
      if (currentPage === 'landing') {
        app.innerHTML = `
          <div class="min-h-screen flex items-center justify-center px-6 bg-gradient-to-b from-black to-gray-900">
            <div class="text-center space-y-6 max-w-2xl">
              <div class="text-7xl animate-pulse">ğŸ‹ï¸</div>
              <h1 class="text-6xl font-black bg-gradient-to-r from-orange-400 to-red-500 bg-clip-text text-transparent">KHAN</h1>
              <p class="text-2xl font-bold text-orange-400">AI Fitness Coach</p>
              <p class="text-xl text-gray-400">Real-time coaching. Real results.</p>
              <p class="text-gray-500">See detailed instructions for every move.</p>
              <button onclick="startWorkout()" class="px-12 py-6 rounded-xl font-black text-xl bg-gradient-to-r from-orange-400 to-red-500 hover:opacity-90 transition transform hover:scale-105">
                ğŸš€ Start Fat Loss Protocol
              </button>
            </div>
          </div>
        `;
      } else if (currentPage === 'countdown') {
        const w = workouts[0];
        
        app.innerHTML = `
          <div class="min-h-screen bg-gradient-to-br ${w.color}/10 text-white flex flex-col items-center justify-center px-6">
            <div class="text-center space-y-12">
              <h1 class="text-5xl font-black bg-gradient-to-r ${w.color} bg-clip-text text-transparent">${w.name}</h1>
              
              <p class="text-3xl text-gray-400 font-bold">Are you ready?</p>
              
              <div class="relative">
                <div class="absolute inset-0 bg-gradient-to-r ${w.color} blur-3xl opacity-50"></div>
                <div class="relative text-9xl font-black text-white animate-pulse">
                  ${countdownValue > 0 ? countdownValue : 'ğŸš€'}
                </div>
              </div>
              
              <p class="text-xl text-orange-400 font-bold">
                ${countdownValue > 0 ? 'â³ Prepare for MAXIMUM INTENSITY!' : 'ğŸ’ª GO GO GO!'}
              </p>
            </div>
          </div>
        `;
      } else if (currentPage === 'workout-active') {
        const w = workouts[0];
        const progress = Math.min(100, (sessionTime / 1900) * 100);
        const objective = getCurrentObjective(w.id, sessionTime);
        const isCompleted = sessionTime >= 1900;

        app.innerHTML = `
          <div class="min-h-screen bg-gradient-to-br ${w.color}/10 text-white px-6 py-8 flex flex-col overflow-y-auto">
            <button onclick="finishWorkout()" class="text-gray-400 hover:text-orange-400 self-start mb-4">â† Exit</button>
            
            <!-- TIMER & PROGRESS -->
            <div class="text-center space-y-4 mb-8">
              <div class="text-7xl font-black tabular-nums">${formatTime(sessionTime)}</div>
              <div class="w-full bg-gray-800 rounded-full h-3 overflow-hidden">
                <div class="bg-gradient-to-r ${w.color} h-full transition-all" style="width: ${progress}%"></div>
              </div>
              <p class="text-sm text-gray-400">Overall Progress: ${Math.round(progress)}% | Remaining: ${formatTime(1900 - sessionTime)}</p>
            </div>

            <!-- MAIN EXERCISE DISPLAY -->
            <div class="flex-1 flex flex-col items-center justify-center space-y-8 max-w-3xl mx-auto">
              
              <!-- Visual Emoji -->
              <div class="text-9xl animate-bounce">${objective.visual}</div>
              
              <!-- Exercise Name & Reps -->
              <div class="text-center space-y-2">
                <p class="text-5xl font-black text-yellow-400">${objective.exercise}</p>
                <p class="text-3xl font-bold text-orange-300">${objective.reps}</p>
              </div>

              <!-- MAIN COMMAND (BIG & BOLD) -->
              <div class="border-4 border-yellow-400 rounded-2xl p-8 bg-yellow-400/10 w-full text-center space-y-4">
                <p class="text-5xl font-black text-yellow-400 animate-pulse">${objective.command}</p>
                <p class="text-2xl text-orange-300 font-bold">${objective.instruction}</p>
              </div>

              <!-- DETAILED FORM GUIDE -->
              <div class="bg-gray-800/70 rounded-xl p-6 w-full border border-gray-600">
                <p class="text-sm text-gray-400 mb-3">ğŸ“‹ FORM CHECKLIST:</p>
                <div class="text-sm text-gray-300 whitespace-pre-line font-mono leading-relaxed">
                  ${objective.details}
                </div>
              </div>

              <!-- ACTION BUTTON -->
              ${!isCompleted ? `
                <button onclick="continueWorkout()" class="px-16 py-6 rounded-xl font-black text-2xl bg-gradient-to-r ${w.color} hover:opacity-90 transition transform hover:scale-105 shadow-lg">
                  ğŸ’ª KEEP PUSHING
                </button>
              ` : `
                <button onclick="completeWorkout()" class="px-16 py-6 rounded-xl font-black text-2xl bg-gradient-to-r from-green-400 to-emerald-500 hover:opacity-90 transition transform hover:scale-105 shadow-lg">
                  ğŸ† WORKOUT COMPLETE!
                </button>
              `}
            </div>

            <!-- FOOTER STATS -->
            <div class="mt-8 grid grid-cols-3 gap-4 text-center border-t border-gray-700 pt-6">
              <div>
                <p class="text-gray-400 text-xs">DIFFICULTY</p>
                <p class="text-xl font-black text-orange-400">${w.difficulty}</p>
              </div>
              <div>
                <p class="text-gray-400 text-xs">PHASE</p>
                <p class="text-xl font-black text-blue-400">${Math.ceil(sessionTime / 100)} / 10</p>
              </div>
              <div>
                <p class="text-gray-400 text-xs">INTENSITY</p>
                <p class="text-xl font-black text-red-400">MAX ğŸ”¥</p>
              </div>
            </div>
          </div>
        `;
      }
    }

    function startWorkout() {
      currentPage = 'countdown';
      startCountdown();
    }

    function continueWorkout() {
      render();
    }

    function finishWorkout() {
      sessionActive = false;
      currentPage = 'landing';
      sessionTime = 0;
      render();
    }

    function completeWorkout() {
      sessionActive = false;
      workoutCount++;
      currentPage = 'landing';
      sessionTime = 0;
      render();
    }

    render();
  </script>
</body>
</html>
