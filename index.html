<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Khan - AI Fitness Coach</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-7675533486619158"
     crossorigin="anonymous"></script>
</head>
<body class="bg-black text-white m-0 p-0">
  <div id="app"></div>
  
  <script>
    let currentPage = 'home';
    let selectedWorkout = null;
    let sessionTime = 0;
    let sessionActive = false;
    let countdownActive = false;
    let countdownValue = 10;

    const amazonTag = 'khanthefitapp-21';

    const equipment = {
      hiit: [
        { name: 'Yoga Mat', url: `https://www.amazon.com/s?k=yoga+mat&tag=${amazonTag}` },
        { name: 'Jump Rope', url: `https://www.amazon.com/s?k=jump+rope&tag=${amazonTag}` },
        { name: 'Resistance Bands', url: `https://www.amazon.com/s?k=resistance+bands&tag=${amazonTag}` }
      ],
      strength: [
        { name: 'Dumbbells Set', url: `https://www.amazon.com/s?k=adjustable+dumbbells&tag=${amazonTag}` },
        { name: 'Barbell', url: `https://www.amazon.com/s?k=barbell+set&tag=${amazonTag}` },
        { name: 'Weight Bench', url: `https://www.amazon.com/s?k=weight+bench&tag=${amazonTag}` },
        { name: 'Pull-up Bar', url: `https://www.amazon.com/s?k=pull+up+bar&tag=${amazonTag}` }
      ],
      cardio: [
        { name: 'Running Shoes', url: `https://www.amazon.com/s?k=running+shoes&tag=${amazonTag}` },
        { name: 'Bluetooth Headphones', url: `https://www.amazon.com/s?k=wireless+headphones&tag=${amazonTag}` },
        { name: 'Sports Watch', url: `https://www.amazon.com/s?k=sports+watch+fitness&tag=${amazonTag}` }
      ]
    };

    const workouts = [
      { 
        id: 1, 
        name: "Fat Loss Protocol", 
        type: "hiit", 
        duration: 30, 
        difficulty: "Advanced", 
        icon: "üî•",
        color: "from-red-500 to-pink-500",
        objectives: [
          { exercise: "Warm-up", reps: "5 min", duration: 300, command: "Get Your Body Ready", instruction: "Light jogging. Arm circles. Jumping jacks. Deep breathing.", details: "‚Ä¢ Light pace\n‚Ä¢ Loose movements\n‚Ä¢ Deep breathing" },
          { exercise: "Burpees", reps: "40 sec", duration: 40, command: "Maximum Speed", instruction: "Drop ‚Üí Push-up ‚Üí Jump feet back ‚Üí Jump UP. Non-stop.", details: "‚Ä¢ Full range\n‚Ä¢ No rest\n‚Ä¢ Land soft" },
          { exercise: "Rest", reps: "20 sec", duration: 20, command: "Breathe Hard", instruction: "Heavy breathing. Hands on knees. Prepare for next.", details: "‚Ä¢ Catch breath\n‚Ä¢ Shake out legs" },
          { exercise: "Jump Squats", reps: "40 sec", duration: 40, command: "Explosive Legs", instruction: "Squat down ‚Üí Jump UP high ‚Üí Land soft.", details: "‚Ä¢ Deep squat\n‚Ä¢ Maximum air\n‚Ä¢ Soft landing" },
          { exercise: "Rest", reps: "20 sec", duration: 20, command: "Breathe", instruction: "Keep moving. Light bouncing.", details: "‚Ä¢ Stay moving" },
          { exercise: "Mountain Climbers", reps: "40 sec", duration: 40, command: "Cardio Overload", instruction: "Plank ‚Üí Drive knees to chest FAST.", details: "‚Ä¢ Fast pace\n‚Ä¢ Knees to chest" },
          { exercise: "Rest", reps: "20 sec", duration: 20, command: "Almost Done", instruction: "Shake it out. Get ready.", details: "‚Ä¢ Shake legs" },
          { exercise: "Push-ups", reps: "40 sec", duration: 40, command: "Chest Strength", instruction: "Lower chest to ground ‚Üí Push explosively up.", details: "‚Ä¢ Full depth\n‚Ä¢ Explosive push" },
          { exercise: "Round 2", reps: "Repeat", duration: 280, command: "Push Harder", instruction: "Same 4 exercises. Increase intensity.", details: "‚Ä¢ Faster pace\n‚Ä¢ More reps" },
          { exercise: "Round 3", reps: "All Out", duration: 280, command: "Final Round", instruction: "Everything you've got. Last push.", details: "‚Ä¢ Maximum effort" },
          { exercise: "Cool Down", reps: "5 min", duration: 300, command: "You Crushed It", instruction: "Walk it out. Light stretching.", details: "‚Ä¢ Walk it out\n‚Ä¢ Stretch" }
        ]
      },
      { 
        id: 2, 
        name: "Upper Body Powerhouse", 
        type: "strength", 
        duration: 30, 
        difficulty: "Advanced", 
        icon: "üí™",
        color: "from-orange-400 to-amber-500",
        objectives: [
          { exercise: "Warm-up", reps: "3 min", duration: 180, command: "Prepare Your Shoulders", instruction: "Light cardio. Arm circles. Band work.", details: "‚Ä¢ Light pace\n‚Ä¢ Mobility work" },
          { exercise: "Bench Press", reps: "4x6 reps", duration: 360, command: "Heavy Weight", instruction: "Lower to chest. Explode up. 2 min rest.", details: "‚Ä¢ Full depth\n‚Ä¢ Explosive push" },
          { exercise: "Dumbbell Flyes", reps: "3x10", duration: 180, command: "Stretch and Squeeze", instruction: "Light weight. Stretch across. Squeeze at top.", details: "‚Ä¢ Full ROM\n‚Ä¢ Slow control" },
          { exercise: "Incline Push-ups", reps: "3x12", duration: 180, command: "No Rest Sets", instruction: "Hands elevated. Lower down. Explosive.", details: "‚Ä¢ Elevated\n‚Ä¢ Full depth" },
          { exercise: "Shoulder Press", reps: "4x8", duration: 240, command: "Power Move", instruction: "Press dumbbells overhead. Control descent.", details: "‚Ä¢ Press overhead\n‚Ä¢ Controlled down" },
          { exercise: "Lateral Raises", reps: "3x12", duration: 180, command: "Burn Shoulders", instruction: "Light dumbbells. Raise to shoulder height.", details: "‚Ä¢ Shoulder height\n‚Ä¢ Light weight" },
          { exercise: "Face Pulls", reps: "3x15", duration: 180, command: "Back Activation", instruction: "High cable. Pull to face. Spread rope.", details: "‚Ä¢ High cable\n‚Ä¢ Pull to face" },
          { exercise: "Barbell Rows", reps: "4x6", duration: 240, command: "Back Strength", instruction: "Heavy weight. Pull explosively. Chest to bar.", details: "‚Ä¢ Heavy weight\n‚Ä¢ Explosive pull" },
          { exercise: "Weighted Dips", reps: "3x8", duration: 180, command: "Dip Power", instruction: "Add weight belt. Lower below parallel.", details: "‚Ä¢ Weight belt\n‚Ä¢ Full depth" },
          { exercise: "Barbell Curls", reps: "3x10", duration: 180, command: "Pump Arms", instruction: "Strict form. No swinging. Peak contraction.", details: "‚Ä¢ Strict form\n‚Ä¢ Peak contraction" },
          { exercise: "Stretch", reps: "5 min", duration: 300, command: "Recovery Time", instruction: "Chest, shoulders, arms. Deep stretches.", details: "‚Ä¢ Chest stretch\n‚Ä¢ Shoulder stretch" }
        ]
      },
      { 
        id: 3, 
        name: "Lower Body Blast", 
        type: "strength", 
        duration: 30, 
        difficulty: "Intermediate", 
        icon: "ü¶µ",
        color: "from-pink-400 to-red-500",
        objectives: [
          { exercise: "Warm-up", reps: "3 min", duration: 180, command: "Activate Legs", instruction: "Light cardio. Leg swings. Mobility.", details: "‚Ä¢ Light pace\n‚Ä¢ Leg swings" },
          { exercise: "Glute Bridges", reps: "4x15", duration: 240, command: "Squeeze Glutes", instruction: "Squeeze at top. Feel glutes contract.", details: "‚Ä¢ Squeeze at top\n‚Ä¢ Full ROM" },
          { exercise: "Bulgarian Split Squats", reps: "4x12", duration: 240, command: "Leg Burn", instruction: "Back leg elevated. Push through front heel.", details: "‚Ä¢ Elevated\n‚Ä¢ Push front heel" },
          { exercise: "Jump Squats", reps: "3x15", duration: 180, command: "Explosive Power", instruction: "Explosive. Air time on every rep.", details: "‚Ä¢ Explosive\n‚Ä¢ Full ROM" },
          { exercise: "Crunches", reps: "3x20", duration: 180, command: "Core Fire", instruction: "Slow and controlled. Feel abs.", details: "‚Ä¢ Slow motion\n‚Ä¢ Controlled" },
          { exercise: "Plank Hold", reps: "3x30sec", duration: 90, command: "Hold Tight", instruction: "Perfect form. Don't let hips drop.", details: "‚Ä¢ Perfect form\n‚Ä¢ Engage core" },
          { exercise: "Leg Press", reps: "4x8", duration: 240, command: "Heavy Weight", instruction: "Full range. Powerful push.", details: "‚Ä¢ Full range\n‚Ä¢ Powerful" },
          { exercise: "Leg Curls", reps: "3x12", duration: 180, command: "Hamstring Work", instruction: "Controlled motion. Feel the burn.", details: "‚Ä¢ Controlled\n‚Ä¢ Full ROM" },
          { exercise: "Calf Raises", reps: "4x15", duration: 180, command: "Calf Pump", instruction: "Slow. Explosive. Squeeze at top.", details: "‚Ä¢ Slow tempo\n‚Ä¢ Explosive" },
          { exercise: "Cool Down", reps: "5 min", duration: 300, command: "Legs Crushed", instruction: "Walk it out. Stretch quads, hamstrings.", details: "‚Ä¢ Walk it out\n‚Ä¢ Stretch" }
        ]
      },
      { 
        id: 4, 
        name: "Cardio Endurance", 
        type: "cardio", 
        duration: 30, 
        difficulty: "Advanced", 
        icon: "üèÉ",
        color: "from-blue-400 to-cyan-500",
        objectives: [
          { exercise: "Warm-up", reps: "5 min", duration: 300, command: "Easy Pace", instruction: "Light jogging. Get heart rate up.", details: "‚Ä¢ Light pace\n‚Ä¢ Steady breathing" },
          { exercise: "Steady State", reps: "10 min", duration: 600, command: "Maintain Pace", instruction: "Sustained speed. Controlled breathing.", details: "‚Ä¢ Steady speed\n‚Ä¢ Breathe steady" },
          { exercise: "Tempo Push", reps: "5 min", duration: 300, command: "Increase Speed", instruction: "Pick up pace. Challenging rhythm.", details: "‚Ä¢ Pick up pace\n‚Ä¢ Stay strong" },
          { exercise: "Sprint Interval", reps: "1 min", duration: 60, command: "Go Hard", instruction: "Maximum speed. All out effort.", details: "‚Ä¢ Maximum speed\n‚Ä¢ All effort" },
          { exercise: "Recovery Jog", reps: "1 min", duration: 60, command: "Recovery", instruction: "Slow down. Catch breath.", details: "‚Ä¢ Slow jog\n‚Ä¢ Recover" },
          { exercise: "Sprint 2", reps: "1 min", duration: 60, command: "Push Again", instruction: "Sprint again. Match first effort.", details: "‚Ä¢ Sprint\n‚Ä¢ All out" },
          { exercise: "Recovery", reps: "1 min", duration: 60, command: "Breathe", instruction: "Easy pace. Light jog.", details: "‚Ä¢ Light jog" },
          { exercise: "Final Sprint", reps: "1 min", duration: 60, command: "Last Push", instruction: "Everything left. Final sprint.", details: "‚Ä¢ All effort\n‚Ä¢ Final push" },
          { exercise: "Cool Down", reps: "5 min", duration: 300, command: "You Did It", instruction: "Walk it out. Breathing slows.", details: "‚Ä¢ Walk it out\n‚Ä¢ Stretch legs" }
        ]
      }
    ];

    function formatTime(seconds) {
      const mins = Math.floor(seconds / 60);
      const secs = seconds % 60;
      return `${mins}:${secs < 10 ? '0' : ''}${secs}`;
    }

    function getCurrentObjectiveIndex(workoutId, timeElapsed) {
      const w = workouts.find(x => x.id === workoutId);
      if (!w) return 0;
      let cumTime = 0;
      for (let i = 0; i < w.objectives.length; i++) {
        cumTime += w.objectives[i].duration;
        if (timeElapsed < cumTime) return i;
      }
      return w.objectives.length - 1;
    }

    function getTimeIntoObjective(workoutId, timeElapsed) {
      const w = workouts.find(x => x.id === workoutId);
      if (!w) return 0;
      let cumTime = 0;
      for (let i = 0; i < w.objectives.length; i++) {
        if (timeElapsed < cumTime + w.objectives[i].duration) {
          return timeElapsed - cumTime;
        }
        cumTime += w.objectives[i].duration;
      }
      return 0;
    }

    function getTotalDuration(workoutId) {
      const w = workouts.find(x => x.id === workoutId);
      if (!w) return 0;
      return w.objectives.reduce((sum, obj) => sum + obj.duration, 0);
    }

    function updateCountdown() {
      if (!countdownActive) return;
      render();
      if (countdownValue > 0) {
        countdownValue--;
        setTimeout(updateCountdown, 1000);
      } else {
        countdownActive = false;
        currentPage = 'workout-active';
        startSessionTimer();
      }
    }

    function startSessionTimer() {
      sessionActive = true;
      sessionTime = 0;
      updateSession();
    }

    function updateSession() {
      if (!sessionActive) return;
      sessionTime++;
      render();
      const totalDuration = getTotalDuration(selectedWorkout);
      if (sessionTime < totalDuration) {
        setTimeout(updateSession, 1000);
      } else {
        sessionActive = false;
      }
    }

    function render() {
      const app = document.getElementById('app');
      
      if (currentPage === 'home') {
        app.innerHTML = `
          <div class="min-h-screen bg-gradient-to-b from-black to-gray-900 text-white px-6 py-12">
            <div class="max-w-4xl mx-auto">
              <div class="text-center mb-12">
                <h1 class="text-6xl font-black mb-2">KHAN</h1>
                <p class="text-xl text-gray-400">Professional Fitness Coach</p>
              </div>

              <div class="space-y-4 mb-12">
                ${workouts.map(w => `
                  <button onclick="selectWorkout(${w.id})" class="w-full p-6 rounded-xl border-2 border-gray-700 hover:border-orange-400 bg-gradient-to-br ${w.color}/10 transition transform hover:scale-102 text-left">
                    <div class="flex items-center justify-between">
                      <div>
                        <p class="text-2xl font-black">${w.name}</p>
                        <p class="text-sm text-gray-400 mt-2">${w.difficulty} ‚Ä¢ ${w.duration}min</p>
                      </div>
                      <p class="text-3xl">${w.icon}</p>
                    </div>
                  </button>
                `).join('')}
              </div>

              <!-- EQUIPMENT RECOMMENDATIONS -->
              <div class="bg-gray-900/50 rounded-xl border border-gray-700 p-8 mb-12">
                <h2 class="text-2xl font-black mb-6">Recommended Equipment</h2>
                
                <div class="space-y-6">
                  <div>
                    <p class="text-lg font-bold text-red-400 mb-3">HIIT Training</p>
                    <div class="flex flex-wrap gap-3">
                      ${equipment.hiit.map(item => `
                        <a href="${item.url}" target="_blank" rel="noopener noreferrer" class="px-4 py-2 rounded-lg border border-gray-600 hover:border-orange-400 text-sm font-bold transition">
                          ${item.name} ‚Üí
                        </a>
                      `).join('')}
                    </div>
                  </div>

                  <div>
                    <p class="text-lg font-bold text-orange-400 mb-3">Strength Training</p>
                    <div class="flex flex-wrap gap-3">
                      ${equipment.strength.map(item => `
                        <a href="${item.url}" target="_blank" rel="noopener noreferrer" class="px-4 py-2 rounded-lg border border-gray-600 hover:border-orange-400 text-sm font-bold transition">
                          ${item.name} ‚Üí
                        </a>
                      `).join('')}
                    </div>
                  </div>

                  <div>
                    <p class="text-lg font-bold text-blue-400 mb-3">Cardio</p>
                    <div class="flex flex-wrap gap-3">
                      ${equipment.cardio.map(item => `
                        <a href="${item.url}" target="_blank" rel="noopener noreferrer" class="px-4 py-2 rounded-lg border border-gray-600 hover:border-orange-400 text-sm font-bold transition">
                          ${item.name} ‚Üí
                        </a>
                      `).join('')}
                    </div>
                  </div>
                </div>

                <p class="text-xs text-gray-500 mt-6">As an Amazon Associate, we earn from qualifying purchases</p>
              </div>

              <!-- ADSENSE BANNER -->
              <div class="text-center">
                <ins class="adsbygoogle"
                     style="display:block"
                     data-ad-client="ca-pub-7675533486619158"
                     data-ad-slot="1234567890"
                     data-ad-format="auto"
                     data-full-width-responsive="true"></ins>
                <script>
                     (adsbygoogle = window.adsbygoogle || []).push({});
                </script>
              </div>
            </div>
          </div>
        `;
      } else if (currentPage === 'countdown') {
        const w = workouts.find(x => x.id === selectedWorkout);
        app.innerHTML = `
          <div class="min-h-screen bg-gradient-to-br ${w.color}/10 text-white flex flex-col items-center justify-center px-6">
            <button onclick="currentPage='home'; render();" class="absolute top-6 left-6 text-gray-400 hover:text-orange-400">‚Üê Back</button>
            <div class="text-center space-y-12">
              <h1 class="text-5xl font-black">${w.name}</h1>
              <p class="text-3xl text-gray-400 font-bold">Ready?</p>
              <div class="relative">
                <div class="absolute inset-0 bg-gradient-to-r ${w.color} blur-3xl opacity-50"></div>
                <div class="relative text-9xl font-black text-white animate-pulse">${countdownValue > 0 ? countdownValue : 'GO'}</div>
              </div>
            </div>
          </div>
        `;
      } else if (currentPage === 'workout-active') {
        const w = workouts.find(x => x.id === selectedWorkout);
        const totalDuration = getTotalDuration(selectedWorkout);
        const objIndex = getCurrentObjectiveIndex(selectedWorkout, sessionTime);
        const timeIntoObj = getTimeIntoObjective(selectedWorkout, sessionTime);
        const obj = w.objectives[objIndex];
        const nextObj = w.objectives[objIndex + 1];
        const totalProgress = Math.min(100, (sessionTime / totalDuration) * 100);
        const objProgress = Math.min(100, (timeIntoObj / obj.duration) * 100);
        const timeLeft = obj.duration - timeIntoObj;
        const totalTimeLeft = totalDuration - sessionTime;
        const isCompleted = sessionTime >= totalDuration;

        app.innerHTML = `
          <div class="min-h-screen bg-gradient-to-br ${w.color}/10 text-white px-6 py-8 flex flex-col overflow-y-auto">
            <button onclick="finishWorkout()" class="text-gray-400 hover:text-orange-400 self-start mb-4">‚Üê Exit</button>
            
            <div class="text-center mb-6">
              <p class="text-gray-400 text-sm mb-2">TOTAL TIME</p>
              <p class="text-5xl font-black tabular-nums">${formatTime(sessionTime)} / ${formatTime(totalDuration)}</p>
              <div class="w-full bg-gray-800 rounded-full h-2 overflow-hidden mt-3">
                <div class="bg-gradient-to-r ${w.color} h-full transition-all" style="width: ${totalProgress}%"></div>
              </div>
              <p class="text-xs text-gray-500 mt-2">${Math.round(totalProgress)}% Complete</p>
            </div>

            <div class="flex-1 flex flex-col items-center justify-center space-y-8 max-w-3xl mx-auto">
              <div class="text-center space-y-2">
                <p class="text-6xl font-black text-yellow-400">${formatTime(timeLeft)}</p>
                <p class="text-3xl font-black">${obj.exercise}</p>
                <p class="text-xl text-orange-300">${obj.reps}</p>
              </div>

              <div class="w-full max-w-md">
                <div class="bg-gray-800 rounded-full h-4 overflow-hidden">
                  <div class="bg-gradient-to-r ${w.color} h-full transition-all" style="width: ${objProgress}%"></div>
                </div>
              </div>

              <div class="border-4 border-yellow-400 rounded-2xl p-8 bg-yellow-400/10 w-full text-center space-y-4">
                <p class="text-4xl font-black text-yellow-400 animate-pulse">${obj.command}</p>
                <p class="text-xl text-orange-300 font-bold">${obj.instruction}</p>
              </div>

              <div class="bg-gray-800/70 rounded-xl p-6 w-full border border-gray-600">
                <p class="text-sm text-gray-400 mb-3">FORM CHECKLIST</p>
                <div class="text-sm text-gray-300 whitespace-pre-line font-mono">${obj.details}</div>
              </div>

              ${nextObj ? `
                <div class="bg-gray-900/70 rounded-xl p-6 w-full border border-gray-600">
                  <p class="text-sm text-gray-400 mb-2">NEXT</p>
                  <p class="text-2xl font-black text-blue-400">${nextObj.exercise}</p>
                  <p class="text-sm text-gray-400 mt-1">${nextObj.reps}</p>
                </div>
              ` : ''}

              ${!isCompleted ? `
                <button onclick="continueWorkout()" class="px-16 py-6 rounded-xl font-black text-2xl bg-gradient-to-r ${w.color} hover:opacity-90 transition transform hover:scale-105">
                  PUSH
                </button>
              ` : `
                <button onclick="finishWorkout()" class="px-16 py-6 rounded-xl font-black text-2xl bg-gradient-to-r from-green-400 to-emerald-500 hover:opacity-90 transition">
                  COMPLETE
                </button>
              `}
            </div>

            <div class="mt-8 grid grid-cols-3 gap-4 text-center border-t border-gray-700 pt-6">
              <div>
                <p class="text-gray-400 text-xs">EXERCISE</p>
                <p class="text-lg font-black text-orange-400">${objIndex + 1}/${w.objectives.length}</p>
              </div>
              <div>
                <p class="text-gray-400 text-xs">DIFFICULTY</p>
                <p class="text-lg font-black">${w.difficulty}</p>
              </div>
              <div>
                <p class="text-gray-400 text-xs">REMAINING</p>
                <p class="text-lg font-black">${formatTime(totalTimeLeft)}</p>
              </div>
            </div>
          </div>
        `;
      }
    }

    function selectWorkout(id) {
      selectedWorkout = id;
      currentPage = 'countdown';
      countdownActive = true;
      countdownValue = 10;
      updateCountdown();
    }

    function continueWorkout() {
      render();
    }

    function finishWorkout() {
      sessionActive = false;
      currentPage = 'home';
      sessionTime = 0;
      selectedWorkout = null;
      render();
    }

    render();
  </script>
</body>
</html>
